<!DOCTYPE html>
<html lang="zxx">

<head>
  <meta charset="utf-8">
  <title>MultiLab – Virtual Learning Simulator</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
  <!-- themefy-icon -->
  <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="plugins/slick/slick.css">
  <!-- venobox popup -->
  <link rel="stylesheet" href="plugins/Venobox/venobox.css">
  <!-- aos -->
  <link rel="stylesheet" href="plugins/aos/aos.css">

  <!-- Main Stylesheet -->
  <link href="css/style.css" rel="stylesheet">
  
  <!--Favicon-->
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
<style>
    .profile-card {
      background: #fff;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    .profile-avatar {
      width: 120px;
      height: 120px;
      object-fit: cover;
    }
  </style>
</head>

<body>
  

<!-- navigation -->
<section class="fixed-top navigation">
  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
      <a class="navbar-brand" href="dashboard.html"><img src="images/logo.png" alt="logo"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- navbar -->
      <div class="collapse navbar-collapse text-center" id="navbar">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="dashboard.html">Home</a>
          </li>
          <!-- Menu khusus user / fitur interaktif -->
          <li class="nav-item"><a class="nav-link" href="lab.html">Lab Eksperimen</a></li>
          <li class="nav-item"><a class="nav-link" href="game.html">Game Edukasi</a></li>
        </ul>
        <div class="dropdown ml-lg-3">
  <a href="#" class="d-flex align-items-center dropdown-toggle" id="userDropdown" data-toggle="dropdown">
    <img id="navUserImg"
     src="assets/img/user.jpg"
     alt="User"
     class="rounded-circle"
     width="40" height="40">

  </a>

  <div class="dropdown-menu dropdown-menu-right">
    <a class="dropdown-item" href="profile.html">Profile</a>
    <a class="dropdown-item" href="#">Eksperimen Saya</a>
    <a class="dropdown-item" href="#">Game Progress</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item text-danger" href="#" id="logoutBtn">Logout</a>
  </div>
</div>

      </div>
    </nav>
  </div>
</section>
<!-- /navigation -->

<!-- pricing -->
<section class="section-lg pb-0 pricing" id="pricing">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-title">Profile</h2>
        <p class="mb-50">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu <br>
          fugiat nulla pariatur. Excepteur sint occaecat </p>
      </div>
      <div class="col-lg-10 mx-auto">
        <div class="row justify-content-center">
          <!-- pricing table -->
<div class="col-lg-6 col-md-8">
  <div class="profile-card">


          <div class="text-center mb-4">
            <img id="previewImg" src="assets/img/user.jpg" class="rounded-circle profile-avatar mb-3">
            <div>
              <input type="file" id="photoInput" class="form-control-file">
            </div>
          </div>
          <div id="successAlert" class="alert alert-success d-none">
            ✅ Profil berhasil disimpan
          </div>

          <form id="profileForm">
            <div class="form-group">
              <label>Nama Lengkap</label>
              <input type="text" id="fullname" class="form-control" placeholder="Nama lengkap">
            </div>

            <div class="form-group">
              <label>Email</label>
              <input type="email" id="email" class="form-control" placeholder="Email">
            </div>

            <div class="form-group">
              <label>Username</label>
              <input type="text" id="username" class="form-control" placeholder="Username">
            </div>

            <div class="form-group">
              <label>Password Baru</label>
              <input type="password" id="password" class="form-control" placeholder="Kosongkan jika tidak diganti">
            </div>

            <div class="form-group">
              <label>Bio</label>
              <textarea id="bio" class="form-control" rows="3"></textarea>
            </div>

            <button type="submit" class="btn btn-primary btn-block" id="saveBtn">
  <span id="saveText">Simpan Perubahan</span>
</button>

          </form>

        </div>

  </div>
</div>

        </div>
      </div>
    </div>
  </div>
  <!-- background shapes -->
  <img class="pricing-bg-shape-1 up-down-animation" src="images/background-shape/seo-ball-1.png" alt="background-shape">
  <img class="pricing-bg-shape-2 up-down-animation" src="images/background-shape/seo-half-cycle.png" alt="background-shape">
  <img class="pricing-bg-shape-3 left-right-animation" src="images/background-shape/team-bg-triangle.png" alt="background-shape">
</section>
<!-- /pricing -->

<!-- footer -->
<footer class="footer-section footer" style="background-image: url(images/backgrounds/footer-bg.png);">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0">
        <!-- logo -->
        <a href="dashboard.html">
          <img class="img-fluid" src="images/logo.png" alt="logo">
        </a>
      </div>
      <!-- footer menu -->
      <nav class="col-lg-8 align-self-center mb-5">
        <ul class="list-inline text-lg-right text-center footer-menu">
          <li class="list-inline-item active"><a href="dashboard.html">Home</a></li>
          
          <!-- Menu khusus user / fitur interaktif -->
          <li class="nav-item"><a class="nav-link" href="lab.html">Lab Eksperimen</a></li>
          <li class="nav-item"><a class="nav-link" href="game.html">Game Edukasi</a></li>
        </ul>
      </nav>
      <!-- footer social icon -->
      <nav class="col-12">
        <ul class="list-inline text-lg-right text-center social-icon">
          <li class="list-inline-item">
            <a class="facebook" href="#"><i class="ti-facebook"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="twitter" href="#"><i class="ti-twitter-alt"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="linkedin" href="#"><i class="ti-linkedin"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="black" href="#"><i class="ti-github"></i></a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- jQuery -->
<script src="plugins/jQuery/jquery.min.js"></script>
<!-- Bootstrap JS -->
<script src="plugins/bootstrap/bootstrap.min.js"></script>
<!-- slick slider -->
<script src="plugins/slick/slick.min.js"></script>
<!-- venobox -->
<script src="plugins/Venobox/venobox.min.js"></script>
<!-- aos -->
<script src="plugins/aos/aos.js"></script>
<!-- Main Script -->
<script src="js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const fullname   = document.getElementById("fullname");
  const email      = document.getElementById("email");
  const username   = document.getElementById("username");
  const bio        = document.getElementById("bio");
  const previewImg = document.getElementById("previewImg");
  const navUserImg = document.getElementById("navUserImg");
  const photoInput = document.getElementById("photoInput");
  const profileForm = document.getElementById("profileForm");
  const logoutBtn  = document.getElementById("logoutBtn");

  const saveBtn   = document.getElementById("saveBtn");
  const saveText  = document.getElementById("saveText");
  const alertBox  = document.getElementById("successAlert");
  const Swal = window.Swal;

  /* LOAD DATA */
  const data = JSON.parse(localStorage.getItem("profile")) || {};
  fullname.value = data.fullname || "";
  email.value    = data.email || "";
  username.value = data.username || "";
  bio.value      = data.bio || "";

  if (data.photo) {
    previewImg.src = data.photo;
    navUserImg.src = data.photo;
  }

  /* SIMPAN PROFILE */
  profileForm.addEventListener("submit", e => {
    e.preventDefault();

    if (!fullname.value || !email.value) {
      alert("Nama & Email wajib diisi!");
      return;
    }

    saveBtn.disabled = true;
    let dots = 0;
    saveText.textContent = "Menyimpan";

    const loading = setInterval(() => {
      dots = (dots + 1) % 4;
      saveText.textContent = "Menyimpan" + ".".repeat(dots);
    }, 500);

    setTimeout(() => {
      clearInterval(loading);

      const profileData = {
        fullname: fullname.value,
        email: email.value,
        username: username.value,
        bio: bio.value,
        photo: previewImg.src
      };

      localStorage.setItem("profile", JSON.stringify(profileData));

      saveBtn.disabled = false;
      saveText.textContent = "Simpan Perubahan";

      // Tampilkan alert sukses menggunakan SweetAlert2
      Swal.fire({
        icon: 'success',
        title: 'Berhasil!',
        text: 'Profil berhasil disimpan',
        timer: 2000,
        showConfirmButton: false
      });

      // Alternatif: menggunakan div alert
      // alertBox.classList.remove("d-none");
      // setTimeout(() => alertBox.classList.add("d-none"), 3000);

    }, 2000);
  });

  /* PREVIEW FOTO */
  photoInput.addEventListener("change", () => {
    const file = photoInput.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = e => {
      previewImg.src = e.target.result;
      navUserImg.src = e.target.result;
    };
    reader.readAsDataURL(file);
  });

  /* LOGOUT (TIDAK HAPUS PROFILE) */
  logoutBtn.addEventListener("click", e => {
    e.preventDefault();
    window.location.href = "index.html";
  });

});
</script>

</body>
</html>